add_library(dorado_secondary_features
    decoder_base.cpp
    decoder_base.h
    decoder_factory.cpp
    decoder_factory.h
    encoder_base.h
    encoder_counts.cpp
    encoder_counts.h
    encoder_factory.cpp
    encoder_factory.h
    encoder_read_alignment.cpp
    encoder_read_alignment.h
    haplotag_source.h
    kadayashi_utils.cpp
    kadayashi_utils.h
    medaka_bamiter.cpp
    medaka_bamiter.h
    medaka_counts.cpp
    medaka_counts.h
    medaka_read_matrix.cpp
    medaka_read_matrix.h
)

target_include_directories(dorado_secondary_features
    INTERFACE
        ${CMAKE_CURRENT_SOURCE_DIR}/include/features
)

target_link_libraries(dorado_secondary_features
    PUBLIC
        dorado_torch_utils
        dorado_utils
    PRIVATE
        htslib
        kadayashi::haplotag_lib
        spdlog::spdlog
)

enable_warnings_as_errors(dorado_secondary_features)
